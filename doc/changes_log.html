<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<link href="styles.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="images/icon.png" type="image/png" />
<title>CGRU Changes Log</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="author" content="Timur Hairulin" />
<meta name="description" content="CGRU: CG Tools, Afanasy - Free Open Source Render Farm Manager" />
<meta name="keywords" content="Houdini, Maya, Nuke, RenderMan, Mantra, Mentalray, Max, XSI, SoftImage, prman, Afanasy, animation, rendering, render, farm, manager, free, open source, 3D, 2D" />
</head>
<body>
<table width="99%" align="center">
<tr align="center">
<td width="33%">
<a href="http://sourceforge.net"><img src="../doc/images/sflogo.png" width="88" height="31" border="0" alt="SourceForge.net Logo" /></a>
</td>
<td width="33%">
<p><a href="../index.html" target="_top"><img src="../doc/images/cgru16.png" border="0" alt="CGRU" /></a></p>
</td>
<td width="33%">
<a href="http://cgtalk.ru"><img src="../doc/images/cgtalkru.png" width="88" height="31" border="0" alt="CGTALK.RU Logo" /></a>
</td>
</tr>
</table>

<table width="100%" align="center" cellpadding="0" cellspacing="0">
<tr>
<td width="200px">
<div style="width:100%;height:40px;background:url('../doc/images/header_left.png')" />
</td>
<td>
<div style="width:100%;height:40px;background:url('../doc/images/header.png') repeat-x" />
</td>
<td width="200px">
<div style="width:100%;height:40px;background:url('../doc/images/header_right.png')" />
</td>
</tr>
</table>
<table width="90%" border="0" align="center" cellpadding="0" cellspacing="0"><tr><td>
<!--HEADER-->

<h2 align="center">CGRU Changes Log.</h2>
<hr />
<p>
If Afanasy <b>network protocol changed</b>, it became incompatible with old one.
Protocol version number exists in any Afanasy network system message in it first bytes.
When server receives any message with another protocol version, it sends an empty message back to client, but with new protocol version.
If client receives a message with new protocol version it exits.
So server shuts down all incompatible clients that tries to connect.
</p>
<p>
If Afanasy <b>database schema changed</b> server can't restore state. All information will be lost.
You need to reset old database tables and create new.
You can use this command to perform it:<br/>
<code>afcmd db_resetall</code>
</p>

<br/>

<p>
<a name="release141"/>
<b>1.4.1</b> 2011.03.21 <i>(rev1474 af1466)</i>
</p>
<p>
<a href="../afanasy/doc/server_farm.html">Farm Services Limits</a> to describe a number of software licenses.
</p>
<p>
Movie Maker can draw a logo on an images sequence.
</p>
<p>
Watch renders list can sort and filter renders addresses.
</p>
<p>
System job commands queue can be cleared by restarting task.
</p>
<p>
Technical:
</p>
<p>
Default Python version is 2.7.1. Default Qt version is 4.7.2.<br/>
XML parser moved from Qt to <a href="http://rapidxml.sourceforge.net">RapidXML</a>. No library needed, they are realized by headers only.<br/>
Regular expressions moved from Qt to <a href="http://en.wikipedia.org/wiki/Regular_expression">POSIX</a>, they are almost the same. No library needed. They are in C standard, already realized in GCC and MSVC>=2008SP1.<br/>
No Qt needed for <i>libafanasy</i> and so for <i>libafapi</i> and <i>libpyaf</i> too. No errors can happen importing Python module in other software using Qt.<br/>
Windows version moved to static Qt libraries. No errors can happen with various Qt "dll"s in PATH.<br/>
If parsing is no needed, parser should have an empty string name. Render do not tries to import parser module with an empty name, no error happen.
</p>
<p>
Bugs Fixed:
</p>
<p>
Nuke render script: A try to delete moved temporary image removed.<br/>
Listen job and task output connection error fixed.<br/>
Numeric command frame(s) replacement bug fixed. Now it replaces any number of %04d patterns with start and end frame in a cycle.
(The bug appears for example on a composite commands: "cmd1 && cmd2" or "cmd1; cmd2". And when one task has several files for preview.)<br/>
Maya Auto Save Manager history backup filename from date and time construct on MS Windows bug fixed.<br/>
</p>

<br/>

<p>
<a name="release140"/>
<b>1.4.0</b> 2011.02.20 <i>(rev1348 af1343)</i> New Afanasy network protocol version. New Afanasy database schema.
</p>
<p>
Errors forgive time for job tasks <a href="../afanasy/doc/job_block.html#ErrorsForgiveTime">block</a>
and for <a href="../afanasy/doc/user.html#ErrorsForgiveTime">user</a>.
It is a time form last host error to exclude it from error hosts list.
</p>
<p>
<a href="../afanasy/doc/job_system.html">System job<a>.
Now job (and block) post commands are executed on a render farm by a special system job.
<br/><b>*<i>Your farm hosts must have "system" service to execute job post commands (remove rendered scenes).</i></b>
</p>
<p>
<code>afcmd db_sysjobdel</code> - New <a href="../afanasy/doc/cmd.html">afcmd</a> command argument.
It deletes system job from database. Will be needed if system job will have too much changes with new Afanasy version.
</p>
<p>
Nuke <a href="../plugins/nuke/doc/dailies.html">dailies</a> gizmo can be connected to "Read" node.
Render views list can be customized.
</p>
<p>
Job <a href="../afanasy/doc/job.html#LifeTime">Life Time</a> parameter added, for automatic jobs deletion after some time.
</p>
<p>
<a href="../afanasy/doc/windowsmustdie.html">WindowsMustDie</a>
windows names list can be defined in several files, matched windowsmustdie*.txt mask.
</p>
<p>
User can sort jobs in Watch.
</p>
<p>
Server does not store deleted jobs logs and tasks outputs.
</p>
<p>
Release <b>bin_pyaf</b> removed. Modules for various Python versions are in every release now.
</p>
<p>
Release <b>svn#</b> added. It is an export of a repository.
</p>
<p>
Bugs Fixed:
</p>
<p>
Nuke afanasy gizmo: If it creates output folder, it creates recursive all needed folders.<br/>
Watch job tasks list: Block item error hosts counters corrected.<br/>
Server stores job order in user list in database, so on server restart user jobs list order restored.<br/>
When parser on render finds an error, and than rapidly finds a warning, error status may be lost.<br/>
</p>

<br/>

<p>
<a name="release131"/>
<b>1.3.1</b> 2010.12.14 <i>(rev1257 af1255)</i>
</p>
<p>
<a href="../utilities/moviemaker/doc/index.html">Movie Maker<a> output file naming customizable rules.
This rules works for Nuke <a href="../plugins/nuke/doc/dailies.html">dailies</a> node too.
</p>
<p>
Server <a href="../afanasy/doc/server_farm.html">Farm Setup<a> changed.
Now host get setup form every matched pattern.
And in each pattern you can concretize host settings.
</p>
<p>
Render reboot and shutdown commands can be <a href="../afanasy/doc/render_config.html">configured<a>.
</p>
<p>
Bugs Fixed:
</p>
<p>
Watch job tasks window: Task item: Task host name string may overlap task name stings if this strings are long enough.
</p>

<br/>

<p>
<a name="release130"/>
<b>1.3.0</b> 2010.12.06 <i>(rev1247 af1244)</i> New Afanasy network protocol version. New Afanasy database schema.
</p>
<p>
AfWatch shows services icons, it is common programs icons for users to recognize jobs type.
</p>
<p>
Every Afanasy client has compiled revision number, startup version string and sends them to server.
Most dialogs in CGRU show version, Afanasy GUI also shows clients build revision.
</p>
<p>
Nuke <a href="../plugins/nuke/doc/dailies.html">dailies</a> node to generate movies locally or on Afanasy farm.
</p>
<p>
"movgen" service added. It will be used for movies generation: annotate frames, encode, make dailies.
</p>
<p>
Bugs Fixed:
</p>
<p>
"ScanScan" codecs presets search folder.<br/>
SoftImage "VariRender" changes output folder name for every Framebuffer if folder is specified.<br/>
Houdini mantra filter (af_separate_render ROP) does not filter null images now (shadows for example).<br/>
</p>

<br/>

<p>
<b>1.2.4</b> 2010.11.01
</p>
<p>
<a href="../afanasy/plugins/max/doc/afanasy.html">3D Studio MAX submit to Afanasy scripts</a>. MAX Afanasy service and parser.
</p>
<p>
Watch can ask and launch a custom command with render items and has more sort&filter parameters. 
</p>
<p>
<a href="../utilities/moviemaker/doc/index.html">Movie Maker<a> stereo mode, DNxHD codec ffmpeg preset and Utf-8 full support.
Linear float EXR and logarithm DPX to sRGB conversion bug fixed.
H264 ffmpeg preset updated: good size&quality and frame navigation on MS Windows QuickTime player.
</p>
<p>
Nuke stereo render views in different folders bug fixed.
</p>

<br/>

<p>
<b>1.2.3</b> 2010.08.18
</p>
<p>
Houdini parsers total percentage calculation bug fixed.
</p>

<br/>

<p>
<b>1.2.2</b> 2010.08.17
</p>
<p>
<a href="../utilities/moviemaker/doc/index.html">Movie Maker<a> works with folders with spaces.
</p>
<p>
MS Windows:<br/>
Afanasy Render prefix commands with "<kbd>cmd.exe /c </kbd>".
Afrender kills all child tasks in any case.
(There was still some cases when it did not do it. Warning! QtCore4.dll patched, do not use it.)
Afrender measures network and disk traffic.
Afrender MS Windows version has the same functionality as Linux version.
</p><p>
Package "afanasy-examples" removed. All examples are in "cgru" package.
</p><p>
Full compatibility since 1.2.0.
</p>

<br/>

<p>
<b>1.2.1</b> 2010.08.06
</p>
<p>
Afanasy server database communication bug fixed.
No clients changes.
Full compatibility with 1.2.0.
</p>

<br/>

<p>
<b>1.2.0</b> 2010.08.02 New Afanasy network protocol version. New Afanasy database schema.
</p>
<p>
Afanasy Python <a href="../afanasy/doc/resourcescustom.html">Resources Meter</a>.
You can measure any resource by writing you Python resource meter class.
</p>
<p>
Afanasy Python <a href="../afanasy/doc/parsers.html">Parsers</a> has a new functionality.
A parser can produce <i>warning</i> to notify user, <i>error</i> to stop task with error,
<i>bad result</i> to finish task like with bad exit status (with error in any way).
</p>
<p>
Afanasy render client "<a href="../afanasy/doc/windowsmustdie.html">Windows Must Die<a/>" function.
It finds and kills windows with specified names.
When process crashes, MS Windows can raise a window with apologizes.
This can hang process until someone closes the window.<br/>
(afRender periodically sends WM_CLOSE signal to windows listed in special file.)
</p>
<p>
<a href="../afanasy/plugins/houdini/doc/afanasy.html#SeparateRender"/>Houdini Separate Render</a>
 - ROP to separate Mantra ROP render process on 'ifd' files generation and 'mantra' command render.
It can also split one frame into tiles and render them simultaneous,
clean 'ifd' files, clean tiles and render an image in local temporary folder,
and after successful render copy it to network location
(it can save network traffic, as host do not often write small portions of an image during calculations).
</p>
<p>
Block <a href="../afanasy/doc/job_block.html#FramesPerTask">Frames Per Task</a> parameter can be negative. Needed for sub-frame dependency.
</p>
<p>
Afanasy has an ability to <a href="../afanasy/doc/pathsmap.html">map paths</a>.
You can setup farm with various platforms clients.
Submit jobs on Windows or Linux (MacOSX) to render and on Windows and on Linux (MacOSX) clients.
Every client can have individual a paths map file to translate paths to server and from server.
</p>
<p>
<a href="../utilities/moviemaker/doc/index.html">Movie Maker<a> works on MS Windows.
Linux releases has <a href="http://www.ffmpeg.org">'ffmpeg'<a> binary compiled with
<a href="http://www.videolan.org/developers/x264.html">'x264'<a> library to encode 'H.264' codec.
Windows users need to install <a href="http://www.imagemagick.org">ImageMagick<a>, which contains 'ffmpeg' with 'x264'.
</p>
<p>
<a href="../afanasy/plugins/xsi/doc/afanasy.html">Softimage XSI submit to Afanasy scripts</a>. XSI Afanasy service and parser.
</p>
<p>
Lots of bug-fixes for MS Windows platform. Windows version can be called 'beta'.
</p>

<br/>

<p>
<b>1.1.0</b> 2010.05.09 New Afanasy network protocol version.
</p>
<p>
Afanasy supports IPv6. Server needs to support new protocol, as it stores client addresses, and do not ask name server at every connect (most managers do, alfred too).
</p>
<p>
<a href="../plugins/nuke/doc/renderscript.html">Nuke render script</a> to render images locally in temporary folder and copy completely rendered image (it can reduce network traffic).
</p>
<p>
Nuke render network: 'afanasy' nodes can be connected to describe 'Write' nodes dependency.
</p>
<p>
<a href="../utilities/moviemaker/doc/index.html">Movie Maker<a> - Dialog and command line utility to make movie file from image sequence on Linux.
</p>
<p>
RPM build scripts (tested on openSUSE, Fedora, CentOS).
</p>
<p>
Windows Afanasy GUI applications does not open terminal.
</p>
<p>
Maya 2010 and 2011 support.
</p>
<p>
'fbx2clip' utility removed.
</p>

<br/>

<p>
<b>1.0.0</b> 2009.12.21
</p>
<p>
New project structure. Afanasy source code repository contains 'tags', 'branches' and 'trunk'.
</p>
<p>
CGRU has 'deb' packages build scripts (for Debian and Ubuntu Linux).
</p>

<br/>

<p>
<b>2009.11.12</b>
</p>
<p>
Afanasy project building uses <kbd>CMake</kbd> now. CMakeLists are in repository. <a href="http://www.cmake.org">CMake</a> is a cross-platform build system.
</p>
<p>
CGRU environment initialization is much simplified. You do not need to edit or create scripts. To setup CGRU you need to go in it's root folder and source setup script (like in Houdini now). Unix and Windows examples corrected to work the same way. ( And also total quantity of variables initializing by CGRU setup and needed for correct work is reduced.)
</p>

<br/>

<p>
<b>2009.10.07</b>
</p>
<p>
Python class <a href="python_class_job.html">Job</a> has a 'blocks' list variable. You can manipulate it in your own way it to fill job with blocks.
</p>
<p>
Python class <a href="python_class_block.html">Block</a> can be constructed without any job and has a 'tasks' list variable. You can manipulate it in your own way it to fill block with tasks.
</p>
<p>
Python class <a href="python_class_task.html">Task</a> can be constructed without any block or job.
</p>

<br/>

<p>
<b>2009.09.16</b> New network protocol version. New database schema.
</p>
<p>
Watch renders colors customization.
</p>
<p>
<a href="job_block.html#MultiHost">Multi Host Tasks</a> - tasks can run on several hosts.
</p>
<p>
<a href="python_class_block.html">Python Class Block</a> - <i>setMultiHost</i> method to describe multihosts tasks.
</p>

<br/>

<p>
<b>2009.08.24</b> New network protocol version.
</p>
<p>
Afanasy Watch GUI can manipulate job blocks parameters without to open job tasks window.
</p>
<p>
<code>afjob</code> command, which used to construct job from command line arguments, now supports tasks capacity and capacity coefficients.
</p>

<br/>

<p>
<b>2009.08.20</b> New network protocol version. New database schema.
</p>
<p>
<a href="job_block.html#Capacity">Block Capacity</a> - job block capacity can be variable.<br/>
</p>
<p>
<a href="python_class_block.html">Python Class Block</a> - <i>setVariableCapacity</i> method to describe variable capacity.<br/>
</p>
<p>
Job blocks errors <a href="job_block#ErrorRetries">solving parameters</a> has '-1' value by default, it means to take this parameters from job user settings. Watch does not show this default values.
</p>

<br/>

<p>
<b>2009.08.12</b> New network protocol version. New database schema.
</p>
<p>
<a href="job_block.html#TasksName">Block Tasks Names</a> - job block have a rule for generated tasks names.<br/>
</p>
<p>
<a href="job_block.html#ViewCommand">Block View Command</a> - not numeric block can generated tasks with preview.<br/>
</p>
<p>
<a href="python_class_block.html">Python Class Block</a> - <i>addTask</i> method to add tasks.<br/>
</p>
<p>
<a href="python_class_task.html">Python Class Task</a> - <i>Task</i> New interface for not numeric blocks.<br/>
</p>
<p>
Watch shows block generated task by double click on task in job tasks view.
</p>

<br/>

<!--FOOTER-->
</td></tr></table>
<table width="100%" align="center" cellpadding="0" cellspacing="0">
<tr>
<td width="200px">
   <div style="width:100%;height:40px;background:url('../doc/images/footer_left.png')" />
</td>
<td>
   <div style="width:100%;height:40px;background:url('../doc/images/footer.png') repeat-x" />
</td>
<td width="200px">
   <div style="width:100%;height:40px;background:url('../doc/images/footer_center.png')" />
</td>
<td>
   <div style="width:100%;height:40px;background:url('../doc/images/footer.png') repeat-x" />
</td>
<td width="200px">
   <div style="width:100%;height:40px;background:url('../doc/images/footer_right.png')" />
</td>
</tr>
</table>

<table width="99%" align="center">
<tr align="center">
<td width="33%">
<small><i><a href="http://sourceforge.net/projects/cgru/"><img src="../doc/images/sourceforgeproject.png" border="0" alt="SourceForge.net Project" /></a></i></small>
</td>
<td width="33%">
<p><a href="../index.html" target="_top"><img src="../doc/images/cgru16.png" border="0" alt="CGRU" /></a></p>
</td>
<td width="33%">
<small><i><a href="http://www.cgtalk.ru/forum/forumdisplay.php?f=168"><img src="../doc/images/cgtalkforum.png" border="0" alt="cgtalkforum" /></a></i></small>
</td>
</tr>
</table>
</body>
</html>
