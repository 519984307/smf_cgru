<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<link href="../../doc/styles.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="images/icon.png" type="image/png">
<title>Afanasy Python Module</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="CGRU: CG Tools, CG Rules, Afanasy - Free Open Source Render Farm Manager" />
<meta name="keywords" content="Houdini, Maya, Nuke, RenderMan, Mantra, Mentalray, Max, XSI, SoftImage, prman, Afanasy, animation, rendering, render, farm, manager, free, open source, 3D, 2D" />
</head>
<body>
<table width="99%" align="center">
<tr align="center">
<td width="33%">
<a href="http://sourceforge.net/projects/cgru"><img src="../../doc/images/sflogo.png" width="88" height="31" border="0" alt="SourceForge.net Logo" /></a>
</td>
<td width="33%">
<p><a href="../../index.html" target="_top"><img src="../../doc/images/cgru16.png" border="0" alt="CGRU" /></a></p>
</td>
<td width="33%">
<a href="http://www.linkedin.com/groups/CGRU-AFANASY-4263049"><img src="../../doc/images/linkedin.png" border="0" alt="LinkedIn" /></a>
</td>
</tr>
</table>

<table width="100%" align="center" cellpadding="0" cellspacing="0">
<tr>
<td width="200px">
<div style="width:100%;height:40px;background:url('../../doc/images/header_left.png')" />
</td>
<td>
<div style="width:100%;height:40px;background:url('../../doc/images/header.png') repeat-x" />
</td>
<td width="200px">
<div style="width:100%;height:40px;background:url('../../doc/images/header_right.png')" />
</td>
</tr>
</table>
<table width="90%" border="0" align="center" cellpadding="0" cellspacing="0"><tr><td>
<!--HEADER-->

<h2 align="center">Afanasy Python Module</h2>
<hr />

<h3>Example:</h3>
<code>
#!/usr/bin/env python
</code>
<br/>
# Type python binary to specify the version of python to use.<br/>
<br/>
# Specify afanasy encoding.<br/>
<code>
# coding=utf8
</code>
<br/>
<br/>
# Import afanasy python module ( must be in PYTHONPATH).<br/>
<code>
import af
</code>
<br/>
<br/># Create a job.<br/>
<code>
job = af.Job('somejob')
</code>
<br/>
<br/>
# Set job depend mask to wait other jobs which names match this pattern. By default it is empty (job not wait anything)<br/>
<code><i>
job.setDependMask('another_job_name')
</i></code>
<br/>
<br/>
# Set maximum hosts job can run on. Default value is -1 means that there is no limit for hosts number.<br/>
<i><code>
job.setMaxHosts( 15)
</code></i>
<br/>
<br/>
# Set job hosts mask. By default job can run on any host (which user can run on).<br/>
<code><i>
job.setHostsMask('r0')
</i></code>
<br/>
<br/>
# Start job paused.<br/>
<code><i>
job.offLine()
</i></code>
<br/>
<br/>
# Create a block. Provide block name and type to function as strings.<br/>
<code>
block = job.addBlock('back', 'nuke')
</code>
<br/>
<br/>
# Set block tasks working directory.<br/>
<code>
block.setWorkingDirectory('/cg/projects/test/nuke')
</code>
<br/>
<br/>
# Set block tasks command.<br/>
<code>
block.setCommand('nuke -i -X WriteBack -x scene.nk.tmp.nk %1,%2')
</code>
<br/>
<br/>
# Set block tasks preview command arguments.<br/>
<code><i>
block.setFiles('jpg/img.%04d.jpg')
</i></code>
<br/>
<br/>
# Set block to numeric type, providing first, last frame and frames per host<br/>
<code>
block.setNumeric( 1, 100, 10)
</code>
<br/>
<br/>
# Set command to execute by server after a job is deleted.<br/>
<code><i>
job.setCmdPost('rm /cg/projects/test/nuke/scene.nk.tmp.nk')
</i></code>
<br/>
<br/>
# Send job to Afanasy server.<br/>
<code>
job.send()
</code>
<br/>
<br/>
# Commands marked with <i>italic</i> font are not necessary.<br/>
<br/>
<i># You can copy this text and paste it in python (ensure that your browser will not insert an extra spaces before python commands).</i><br/>

<!--FOOTER-->
</td></tr></table>
<table width="100%" align="center" cellpadding="0" cellspacing="0">
<tr>
<td width="200px">
   <div style="width:100%;height:40px;background:url('../../doc/images/footer_left.png')" />
</td>
<td>
   <div style="width:100%;height:40px;background:url('../../doc/images/footer.png') repeat-x" />
</td>
<td width="200px">
   <div style="width:100%;height:40px;background:url('../../doc/images/footer_center.png')" />
</td>
<td>
   <div style="width:100%;height:40px;background:url('../../doc/images/footer.png') repeat-x" />
</td>
<td width="200px">
   <div style="width:100%;height:40px;background:url('../../doc/images/footer_right.png')" />
</td>
</tr>
</table>

<table width="99%" align="center">
<tr align="center">
<td width="33%">
<a href="https://github.com/CGRU/cgru"><img src="../../doc/images/github.png" border="0" alt="SourceForge.net Project" /></a>
</td>
<td width="33%">
<p><a href="../../index.html" target="_top"><img src="../../doc/images/cgru16.png" border="0" alt="CGRU" /></a></p>
</td>
<td width="33%">
<a href="http://libregraphicsworld.org/tag/cgru"><img src="../../doc/images/lgw.png" border="0" alt="Libre Graphics World" /></a>
</td>
</tr>
</table>
</body>
</html>
