<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<link href="../../../../doc/styles.css" rel="stylesheet" type="text/css" />
<title>Nuke Afanasy Setup</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="CGRU: CG Tools, CG Rules, Afanasy - Free Open Source Render Farm Manager" />
<meta name="keywords" content="Houdini, Maya, Nuke, RenderMan, Mantra, Mentalray, Max, XSI, SoftImage, prman, Afanasy, animation, rendering, render, farm, manager, free, open source, 3D, 2D" />
</head>
<body>
<table width="99%" align="center">
<tr align="center">
<td width="33%">
<a href="http://sourceforge.net/projects/cgru"><img src="../../../../doc/images/sflogo.png" width="88" height="31" border="0" alt="SourceForge.net Logo" /></a>
</td>
<td width="33%">
<p><a href="../../../../index.html" target="_top"><img src="../../../../doc/images/cgru16.png" border="0" alt="CGRU" /></a></p>
</td>
<td width="33%">
<a href="http://www.linkedin.com/groups/CGRU-AFANASY-4263049"><img src="../../../../doc/images/linkedin.png" border="0" alt="LinkedIn" /></a>
</td>
</tr>
</table>

<table width="100%" align="center" cellpadding="0" cellspacing="0">
<tr>
<td width="200px">
<div style="width:100%;height:40px;background:url('../../../../doc/images/header_left.png')" />
</td>
<td>
<div style="width:100%;height:40px;background:url('../../../../doc/images/header.png') repeat-x" />
</td>
<td width="200px">
<div style="width:100%;height:40px;background:url('../../../../doc/images/header_right.png')" />
</td>
</tr>
</table>
<table width="90%" border="0" align="center" cellpadding="0" cellspacing="0"><tr><td>
<!--HEADER-->

<h2 align="center">Nuke Afanasy Setup</h2>
<hr />

Afanasy Nuke scripts are located in <kbd>afanasy/plugins/nuke/[version]</kbd> directory. To add them to Nuke use <kbd>NUKE_PATH</kbd> variable.<br/>

<p>
Nuke setup example:
</p>
<table><tr><td><pre>

   #!/bin/bash

   # Setup Afanasy if was not
   if [ -z "${AF_ROOT}" ]; then
      pwd=$PWD
      cd ../..
      source setup.sh
      cd $pwd
   fi

   # Setup CGRU common scripts if location provided
   if [ ! -z "${CGRU_LOCATION}" ]; then
      export NUKE_CGRU_PATH="${CGRU_LOCATION}/plugins/nuke"
      if [ -z "${NUKE_PATH}" ]; then
         export NUKE_PATH="${NUKE_CGRU_PATH}"
      else
         export NUKE_PATH="${NUKE_PATH}:${NUKE_CGRU_PATH}"
      fi
   fi

   # Set Afanasy scripts version to use
   export NUKE_AF_VERSION="python"
   # Set Afanasy scripts location to use
   export NUKE_AF_PATH=$AF_ROOT/plugins/nuke/$NUKE_AF_VERSION
   # Add Afanasy scripts to Nuke path
   if [ -z "${NUKE_PATH}" ]; then
      export NUKE_PATH="${NUKE_AF_PATH}"
   else
      export NUKE_PATH="${NUKE_PATH}:${NUKE_AF_PATH}"
   fi

   # Default number of threads for rendering:
   export NUKE_AF_RENDERTHREADS=2

   # Nuke render launcher:
   export NUKE_AF_RENDER="nuke -i -m %(threads)s"
   if [ ! -z "${CGRU_LOCATION}" ]; then
      export NUKE_AF_RENDER="${NUKE_AF_RENDER} -t ${CGRU_LOCATION}/plugins/nuke/render.py"
   fi

   # Path to save 'Untitled' scene to render, if not set 'tmp' name in current folder will be used   
   # export NUKE_AF_TMPSCENE="compositing/tmp"

   NUKE_LOCATION="/cg/soft/Nuke5.2"
   export NUKE_EXEC="${NUKE_LOCATION}/Nuke5.2"

   # to launch commands from current directory:
   export AF_CMD_PREFIX="./"

   # overrides (set custom values there):
   [ -f override.sh ] && source override.sh

</pre></td></tr></table>
<p>
This code located in <kbd>afanasy/examples/nuke/setup_nuke.sh</kbd>:
</p>
<p>
MS Windows script example is also provided, it do the same.
</p>

<h2>Versions Compatibility</h2>
<table border="1" width="99%" align="center">
<tr>
   <th width="20%">
      CGRU Nuke
   </th>
   <th width="20%">
      NUKE
   </th>
   <th>
      Method (+comments)
   </th>
</tr>
<tr>
   <td>
      tclcmd
   </td>
   <td>
      4.x - 6.x
   </td>
   <td>
      <b>tcl gizmo</b> run <b>tcl</b> commands (the simplest way - will work in any nuke version with TCL)
   </td>
</tr>
<tr>
   <td>
      python
   </td>
   <td>
      5.2 - 6.x
   </td>
   <td>
      <b>tcl gizmo</b> run <b>python</b> scripts, which use Afanasy <b>python module</b>
   </td>
</tr>
</table>
<p>
To use Afanasy Python module in Nuke (<i> ' import af ' </i>), Nuke and Afanasy Python versions must be compatible. By default Afanasy use (and compiled with) system Python.
</p>
<p>
</p>

<!--FOOTER-->
</td></tr></table>
<table width="100%" align="center" cellpadding="0" cellspacing="0">
<tr>
<td width="200px">
   <div style="width:100%;height:40px;background:url('../../../../doc/images/footer_left.png')" />
</td>
<td>
   <div style="width:100%;height:40px;background:url('../../../../doc/images/footer.png') repeat-x" />
</td>
<td width="200px">
   <div style="width:100%;height:40px;background:url('../../../../doc/images/footer_center.png')" />
</td>
<td>
   <div style="width:100%;height:40px;background:url('../../../../doc/images/footer.png') repeat-x" />
</td>
<td width="200px">
   <div style="width:100%;height:40px;background:url('../../../../doc/images/footer_right.png')" />
</td>
</tr>
</table>

<table width="99%" align="center">
<tr align="center">
<td width="33%">
<a href="https://github.com/CGRU/cgru"><img src="../../../../doc/images/github.png" border="0" alt="SourceForge.net Project" /></a>
</td>
<td width="33%">
<p><a href="../../../../index.html" target="_top"><img src="../../../../doc/images/cgru16.png" border="0" alt="CGRU" /></a></p>
</td>
<td width="33%">
<a href="http://libregraphicsworld.org/tag/cgru"><img src="../../../../doc/images/lgw.png" border="0" alt="Libre Graphics World" /></a>
</td>
</tr>
</table>
</body>
</html>
